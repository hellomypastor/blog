title: ä½¿ç”¨ GithubActions æ‰“é€ å…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ
date: 2025-03-14 12:30:46
categories: Personal
tags: [GithubActions,GithubPages]
---
> åˆ©ç”¨ Github Actioins & Github Pages æ‰“é€ ä¸ªäººè¿åŠ¨ä¸»é¡µ
>
> æˆ‘çš„ä¸ªäººè¿åŠ¨ä¸»é¡µï¼š[https://anchenspp.github.io/running_page/](https://anchenspp.github.io/running_page/)

<!--more-->

### ç¼˜èµ·
æ¯åˆ°å¹´æœ«å²å°¾ï¼Œå„å¤§å¹³å°éƒ½ä¼šæ¨å‡ºå¹´åº¦æ€»ç»“ï¼Œå¯¹äºåˆšå…¥å‘è¶Šé‡è·‘çš„æˆ‘ï¼Œè‡ªç„¶å¾ˆå…³å¿ƒæˆ‘è¿‡å»ä¸€å¹´çš„æ•°æ®ã€‚æˆ‘å¹³æ—¶ä½¿ç”¨çš„æ˜¯ coros pace2 watch + strava appï¼Œcoros å’Œ strava éƒ½ç»™äº†æˆ‘ä¸€ä»½å¹´åº¦æŠ¥å‘Šï¼Œå¦‚ä¸‹ï¼š

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/coros.png)

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/strava.png)

å¶ç„¶é—²é€›å°çº¢ä¹¦ ğŸ ï¼Œçœ‹åˆ°äº†æ›´åŠ æœ‰è¶£çš„æŠ¥å‘Šï¼Œå¯ä»¥æŠŠè·‘æ­¥çš„è½¨è¿¹åšæˆæµ·æŠ¥ï¼Œè¿™åƒä¸åƒæ˜¯ä¸€ç§è®°å½•è·‘è€…çš„è±¡å½¢æ–‡å­—ï¼Œå¦‚ä¸‹ï¼š

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/redbook.png)

æœäº†ä¸‹ï¼Œç½‘ä¸Šæœ‰ 3 ä¸ªå·¥å…·å¯ä»¥ç”Ÿæˆä¸Šè¿°çš„æ•ˆæœå›¾ï¼Œå¯¹æ¯”å¦‚ä¸‹ï¼š

| **** | **runalyze**                                                     | **dashclip**                                                                                               | **running_page**                                                                         |
| --- |------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| **é“¾æ¥** | [https://runalyze.com/dashboard](https://runalyze.com/dashboard) | [https://apps.apple.com/lu/app/dashclip/id6479593003](https://apps.apple.com/lu/app/dashclip/id6479593003) | [https://github.com/yihong0618/running_page](https://github.com/yihong0618/running_page) |
| **æ˜¯å¦å…è´¹** | å…è´¹ï¼ˆé«˜çº§åŠŸèƒ½æ”¶è´¹ï¼‰                                                       | å…è´¹ï¼ˆé«˜çº§åŠŸèƒ½æ”¶è´¹ï¼‰                                                                                                 | å…è´¹ï¼ˆå¼€æºï¼‰                                                                                   |
| **ç‰¹ç‚¹&ä¼˜åŠ¿** | ä¸“ä¸šåˆ†æ                                                             | è½»é‡çº§ã€æ‰‹æœº app                                                                                                 | å…¬å¼€è®¿é—®ã€è‡ªåŠ¨åŒæ­¥                                                                                |
| **æˆªå›¾** | ![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/runalyze.png)                      | ![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/dashclip.png)                                                                | ![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/running_page.png)                                          |


æœ€ç»ˆå†³å®šä½¿ç”¨ running_pageï¼Œé€šè¿‡ Github actions & Github pages æ‰“é€ å…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µã€‚

### å®ç°è¿‡ç¨‹
#### Fork é¡¹ç›®
![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/fork.png)

æˆ‘çš„ä»“åº“åœ°å€ï¼š[https://github.com/anchenspp/running_page](https://github.com/anchenspp/running_page)

#### ç¯å¢ƒé…ç½®
<font style="color:rgb(25, 27, 31);">å°†é¡¹ç›® clone åˆ°æœ¬åœ°</font>

```shell
git clone https://github.com/xxxx/running_page.git --depth=1
```

<font style="color:rgb(25, 27, 31);">å®‰è£…åŠæµ‹è¯• (node >= 16 python >= 3.8)</font>

```shell
pip3 install -r requirements.txt
npm install -g corepack && corepack enable && pnpm install
pnpm develop
```

<font style="color:rgb(25, 27, 31);">è®¿é—® http://localhost:5173/ æŸ¥çœ‹æ•ˆæœ</font>

#### <font style="color:rgb(25, 27, 31);">ä¸ªæ€§åŒ–é…ç½®</font>
<font style="color:rgb(25, 27, 31);">åœ¨ä»“åº“ç›®å½•ä¸‹æ‰¾åˆ° src/static/site-metadata.tsï¼Œæ‰¾åˆ°ä»¥ä¸‹å†…å®¹å¹¶ä¿®æ”¹æˆä½ è‡ªå·±æƒ³è¦çš„ï¼š</font>

```shell
siteMetadata: {
  siteTitle: 'Running Page', #ç½‘ç«™æ ‡é¢˜
  siteUrl: 'https://yihong.run', #ç½‘ç«™åŸŸå
  logo: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQTtc69JxHNcmN1ETpMUX4dozAgAN6iPjWalQ&usqp=CAU', #å·¦ä¸Šè§’ LOGO
  description: 'Personal site and blog',
  navLinks: [
    {
      name: 'Blog', #å³ä¸Šè§’å¯¼èˆªåç§°
      url: 'https://yihong.run/running', #å³ä¸Šè§’å¯¼èˆªé“¾æ¥
    },
    {
      name: 'About',
      url: 'https://github.com/yihong0618/running_page/blob/master/README-CN.md',
    },
  ],
},
```

#### æ•°æ®ä¸‹è½½
ä»¥ coros ä¸ºä¾‹ï¼Œè·å–æ•°æ®å‘½ä»¤ä¸ºï¼š

```shell
python run_page/coros_sync.py 'your coros account' 'your coros password'
```

#### åŒæ­¥é…ç½®
<font style="color:rgb(25, 27, 31);">åœ¨ä»“åº“ç›®å½•ä¸‹æ‰¾åˆ° .github/workflows/run_data_sync.ymlï¼Œä¿®æ”¹åŒæ­¥é…ç½®ï¼š</font>

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/sync_config.png)

#### æäº¤ä»£ç 
```shell
git add .
git commit -m "update"
git push
```

#### éƒ¨ç½² & å®šæ—¶åŒæ­¥
<font style="color:rgb(25, 27, 31);">è¿›å…¥ä»“åº“çš„ Settings -> GitHub Pages -> Sourceï¼Œé€‰æ‹© "GitHub Actions"</font>

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy1.png)

<font style="color:rgb(25, 27, 31);">ä¸º GitHub Actions æ·»åŠ ä»£ç æäº¤æƒé™ï¼Œè®¿é—®ä»“åº“çš„ Settings > Actions > Generalé¡µé¢ï¼Œæ‰¾åˆ° Workflow permissions çš„è®¾ç½®é¡¹ï¼Œå°†é€‰é¡¹é…ç½®ä¸º Read and write permissionsï¼Œæ”¯æŒ CI å°†è¿åŠ¨æ•°æ®æ›´æ–°åæäº¤åˆ°ä»“åº“ä¸­</font>

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy2.png)

<font style="color:rgb(25, 27, 31);">è®¿é—®ä»“åº“çš„ Settings > Security > Secrets and variables > Actions é¡µé¢ï¼Œæ·»åŠ  coros è´¦å·åŠå¯†é’¥ä¿¡æ¯</font>

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy3.png)

<font style="color:rgb(25, 27, 31);">ç‚¹å‡» "Run Data Sync" æ›´æ–°æ•°æ®ï¼Œè§¦å‘ "Publish GitHub Pages" å·¥ä½œæµ</font>

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy4.png)

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy5.png)

åŒæ­¥ä»»åŠ¡æ”¯æŒæ‰‹å·¥è§¦å‘ï¼Œä¹Ÿæ”¯æŒå®šæ—¶è§¦å‘

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy6.png)

#### æ•ˆæœ
![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy7.png)

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy8.png)

![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/deploy9.png)

### åŸç†
![](ä½¿ç”¨GithubActionsæ­å»ºå…è´¹ä¸ªäººè¿åŠ¨ä¸»é¡µ/principle.png)



> 1. <font style="color:rgb(31, 35, 40);">GitHub Actions è‡ªåŠ¨åŒæ­¥è·‘æ­¥æ•°æ®ï¼Œç”Ÿæˆå±•ç¤ºé¡µé¢</font>
> 2. <font style="color:rgb(25, 27, 31);">Gatsby ç”Ÿæˆçš„</font>é™æ€ç½‘é¡µ<font style="color:rgb(25, 27, 31);">ï¼Œé€Ÿåº¦å¿«</font>
> 3. <font style="color:rgb(31, 35, 40);">æ”¯æŒ GitHub Pages è‡ªåŠ¨éƒ¨ç½²</font>
> 4. <font style="color:rgb(31, 35, 40);">React Hooks</font>
> 5. <font style="color:rgb(31, 35, 40);">Mapbox è¿›è¡Œåœ°å›¾å±•ç¤º</font>
> 6. <font style="color:rgb(31, 35, 40);">Nikeã€Stravaã€ä½³æ˜ï¼ˆä½³æ˜ä¸­å›½ï¼‰åŠ Keep ç­‰ï¼Œè‡ªåŠ¨å¤‡ä»½ GPX æ•°æ®ï¼Œæ–¹ä¾¿å¤‡ä»½åŠä¸Šä¼ åˆ°å…¶å®ƒè½¯ä»¶</font>
>
> å› ä¸ºæ•°æ®å­˜åœ¨ gpx å’Œ data.db ä¸­ï¼Œç†è®ºä¸Šæ”¯æŒå‡ ä¸ªè½¯ä»¶ä¸€èµ·ï¼Œä½ å¯ä»¥æŠŠä¹‹å‰å„ç±» App çš„æ•°æ®éƒ½åŒæ­¥åˆ°è¿™é‡Œï¼ˆå»ºè®®æœ¬åœ°åŒæ­¥ï¼Œä¹‹å Actions é€‰æ‹©æ­£åœ¨ç”¨çš„ Appï¼‰
>



Github Actions Job ç¤ºä¾‹

[https://github.com/anchenspp/running_page/actions/runs/13276073371/job/37065801672](https://github.com/anchenspp/running_page/actions/runs/13276073371/job/37065801672)



Commit ç¤ºä¾‹

[https://github.com/anchenspp/running_page/commit/3e51907993f62ff53988279cdd91143171456e72#diff-45cd37dc7670a2ca7f85ada88010c57418f9db57b2cebb401ce36435082f043f](https://github.com/anchenspp/running_page/commit/3e51907993f62ff53988279cdd91143171456e72#diff-45cd37dc7670a2ca7f85ada88010c57418f9db57b2cebb401ce36435082f043f)

### å†™åœ¨æœ€å
æ•´ä¸ªæ­å»ºè¿‡ç¨‹å·®ä¸å¤šè€—æ—¶ 20 åˆ†é’Ÿï¼Œé™¤äº†éƒ¨ç½²çš„æ—¶å€™é‡åˆ°äº†å‡ ä¸ªå‘ä¹‹å¤–ï¼Œå…¶ä»–éƒ½å¾ˆé¡ºåˆ©ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è¯•è¯•ï¼Œè¿™ä»¶äº‹åœ¨æˆ‘çœ‹æ¥è¿˜æ˜¯å¾ˆæœ‰è¶£å¾ˆé…·çš„ã€‚

### å‚è€ƒ
ã€1ã€‘[https://github.com/yihong0618/running_page](https://github.com/yihong0618/running_page)

